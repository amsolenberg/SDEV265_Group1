<nav class="navbar navbar-expand-lg custom-navbar navbar-dark py-3 fixed-top">
  <div class="container">
    <!-- Brand/logo link to the homepage -->
    <a class="navbar-brand" href="/">Online Reservations</a>

    <!-- Toggler button for collapsing the navbar on smaller screens -->
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarNav"
      aria-controls="navbarNav"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>

    <!-- Conditionally include navigation based on user type -->
    <% if (user && user.userType === 'admin') { %>
    <!-- Include admin-specific navigation -->
    <%- include('./nav-admin') %> <% } else { %>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <!-- Common link to Services -->
        <li class="nav-item">
          <a class="nav-link" href="/services">Services</a>
        </li>

        <!-- Divider for visual separation -->
        <li class="nav-item">
          <p class="nav-link">|</p>
        </li>

        <% if (!user) { %>
        <!-- Links for unauthenticated users -->
        <li class="nav-item">
          <a href="/register" class="nav-link">Register</a>
        </li>
        <li class="nav-item">
          <a href="/login" class="nav-link">Login</a>
        </li>
        <% } else { %>
        <!-- Links for authenticated users -->
        <li class="nav-item">
          <a class="nav-link" href="/my-reservations">My Reservations</a>
        </li>
        <li class="nav-item">
          <a href="/logout" class="nav-link">Logout</a>
        </li>
        <% } %>
      </ul>
    </div>
    <% } %>
  </div>
</nav>

<!-- Bootstrap JS Bundle -->
<script
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
  crossorigin="anonymous"
></script>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const navbar = document.querySelector('.navbar');

    // Adjust navbar background color based on scroll position
    window.addEventListener('scroll', () => {
      if (window.scrollY > 50) {
        navbar.style.backgroundColor = 'rgba(0, 0, 0, 0.9)'; // Darker background when scrolled
      } else {
        navbar.style.backgroundColor = 'rgba(0, 0, 0, 0.7)'; // Slightly transparent at the top
      }
    });
  });
</script>
